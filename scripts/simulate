#!/bin/bash
#
# Simulation script
#
read -p 'Choose simulation mode (r, s, l): ' mode

cd $SIM_DIR
rm -Rf *
test -f modelsim.ini || cp $MODEL_SIM/modelsim_st65.ini ./modelsim.ini

case $mode in
    r)
	    echo "Simulating RTL"
        source $SCRIPT_DIR/compile_list
        vlib work
        vcom -work work $COMPILE_FILES $TB_FILES 
	    vsim work.$TOP_TB -do $SCRIPT_DIR/waves.do
	;;
    s)
	    echo "Simulating post-synthesis!!!"
    	# TODO
        # vlib 
	    # vlog
	    # vsim top -do $SCRIPT_DIR/waves.do
	;;
    l)
	    echo "Simulating post-layout"
    	# TODO
	;;

    *)
	    echo "Invalid sim option."
    	echo "Available options are: r s l"
	;;
esac
